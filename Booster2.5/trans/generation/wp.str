module trans/api/wp

imports
	
	include/Booster25
	trans/api/_runtime

rules
	
	wp = 
		?ast;
		try(sometd(method-wp(|ast)))

rules
	
	method-wp(|ast): Method(name, Both(c, gc)) -> Method(name, gc'')
		with
			(c', gc') := <gc-wp(|c)>gc;
			gc'' := |[~c' --> ~gc']|
	
rules
	
	//@type (|c) gc -> (c, gc)
	gc-wp(|c): gc -> (c, gc)
		where
			Assign(PathStart(name, _), _) := gc;
			<debug>name;
			inv* := <_relation-lookup(|"<hasInv:")>name;
			<debug>inv*

rules
	

